{% extends "base.html" %}
{% block content %}
{% if step == 'guide' %}
    <div class="text-center mt-5">
        <i class="fab fa-bluetooth-b text-primary" style="font-size: 60px;"></i>
        <h4 class="mt-4">连接设备</h4>
        <p class="text-muted mt-3 px-4">请确保您已站在门锁附近，并开启了手机蓝牙功能。</p>
        <a href="{{ url_for('setup_search') }}" class="btn btn-primary rounded-pill px-5 py-2 mt-4">开始搜索</a>
    </div>
{% elif step == 'search' %}
    <div class="d-flex flex-column align-items-center justify-content-center h-100">
        <div style="position: relative; width: 100px; height: 100px; display: flex; align-items-center justify-content-center;">
            <i class="fas fa-search text-info" style="font-size: 30px; z-index: 2;"></i>
            <div class="ripple"></div><div class="ripple" style="animation-delay: 0.5s"></div>
        </div>
        <h5 class="mt-4 text-muted">正在搜索...</h5>
        <div id="foundMsg" class="mt-3 text-success fw-bold" style="opacity: 0;">已发现智能门锁!</div>
    </div>
    <script>
        setTimeout(function(){
            document.getElementById('foundMsg').style.opacity = 1;
            setTimeout(function(){
                fetch("{{ url_for('setup_bind') }}", {method: 'POST'})
                .then(res => window.location.href = "{{ url_for('dashboard') }}");
            }, 1500);
        }, 2500);
    </script>
{% endif %}
{% endblock %}